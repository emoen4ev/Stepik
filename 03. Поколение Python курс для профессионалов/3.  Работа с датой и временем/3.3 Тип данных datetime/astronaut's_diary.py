"""
–î–Ω–µ–≤–Ω–∏–∫ –∫–æ—Å–º–æ–Ω–∞–≤—Ç–∞ üå∂Ô∏è

–í–∞–º –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª diary.txt, –≤ –∫–æ—Ç–æ—Ä—ã–π –∫–æ—Å–º–æ–Ω–∞–≤—Ç –∑–∞–ø–∏—Å—ã–≤–∞–ª –Ω–µ–±–æ–ª—å—à–∏–µ –æ—Ç—á—ë—Ç—ã –∑–∞ –¥–µ–Ω—å.
–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –æ—Ç—á—ë—Ç –æ–Ω –º–æ–≥ –∑–∞–ø–∏—Å–∞—Ç—å –ª–∏–±–æ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞, –ª–∏–±–æ –≤ —Å–µ—Ä–µ–¥–∏–Ω—É, –ª–∏–±–æ –≤ –∫–æ–Ω–µ—Ü.
–í—Å–µ –æ—Ç—á–µ—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π.
–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –æ—Ç—á—ë—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–æ —Å—Ç—Ä–æ–∫–∏ —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ DD.MM.YYYY; HH:MM,
–ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π —Å–ª–µ–¥—É—é—Ç —Å–æ–±—ã—Ç–∏—è, –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏–µ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–µ–Ω—å:

29.04.2006; 06:55
It wasn't until several hours after launch that we were able to take the time to get out of our seats
and enter the ‚Äúhabitation module.‚Äù
Then, after another orbital maneuver, we finally were able to take a several hour break and get a little sleep.

03.05.2006; 20:24
Everybody had a sleeping bag although I only used mine on a couple of brief occasions,
and then only when getting a little chilly.
...

–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∫–æ—Å–º–æ–Ω–∞–≤—Ç–∞ –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 1. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –±—ã —Ñ–∞–π–ª diary.txt –∏–º–µ–ª –≤–∏–¥:

13.02.1994; 18:49
–£–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –Ω–∞–±–ª—é–¥–∞–µ–º –Ω–∞ —Ç–µ–Ω–µ–≤–æ–π —á–∞—Å—Ç–∏ –æ—Ä–±–∏—Ç—ã –≤ —Ä–∞–π–æ–Ω–µ –ö–∞–Ω–∞–¥—ã –º–æ—â–Ω–µ–π—à–µ–µ –ø–æ–ª—è—Ä–Ω–æ–µ —Å–∏—è–Ω–∏–µ.
–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, –ø–æ—Ä–∞–∂–∞—é—Ç –º–∞—Å—à—Ç–∞–±—ã –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ. –ü–æ–¥ –Ω–∞–º–∏ –æ–≥—Ä–æ–º–Ω–∞—è –∑–µ–ª–µ–Ω–æ-—Ä–æ–∑–æ–≤–∞—è ¬´–∑–º–µ—è¬ª.

03.02.1994; 20:18
–°–µ–≥–æ–¥–Ω—è –Ω–∞–±–ª—é–¥–∞–ª–∏ –∏ —Å–Ω—è–ª–∏ –Ω–∞ –≤–∏–¥–µ–æ —Å–ª–µ–¥ –®–∞—Ç—Ç–ª–∞ –ø–æ—Å–ª–µ –≤—ã–≤–µ–¥–µ–Ω–∏—è, –¥—ã–º–∏—Ç –æ–Ω –ø—Ä–∏–ª–∏—á–Ω–æ.
–ì–æ—Ç–æ–≤–∏–º—Å—è –∫ —Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª—å—Å–∫–æ–π —Å–≤—è–∑–∏ —Å —ç–∫–∏–ø–∞–∂–µ–º –®–∞—Ç—Ç–ª–∞ –∏, –∫–æ–Ω–µ—á–Ω–æ, —Å –°–µ—Ä–≥–µ–µ–º.
–ü—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ —Å–µ–∞–Ω—Å—É —Å–≤—è–∑–∏ —Å –®–∞—Ç—Ç–ª–æ–º –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å –†–∏—Ç–æ–π, —Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª–µ–º –∏–∑ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏.
–û–Ω–∞ –Ω–µ–º–Ω–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç –ø–æ-—Ä—É—Å—Å–∫–∏ –∏ –æ—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ —Å–ª—ã—à–∞—Ç—å —Ä–æ–¥–Ω—É—é —Ä–µ—á—å.

12.02.1994; 17:17
–°–µ–≥–æ–¥–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–±—Ä–æ—Å–æ–º —á–µ—Ä–µ–∑ —Å–ø—É—Ç–Ω–∏–∫ —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä –≤–∏–¥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Å–Ω—è—Ç–æ–º—É –Ω–∞–º–∏ —Å–ª–µ–¥—É –®–∞—Ç—Ç–ª–∞.
–ö–∞–∫ —Å–æ–æ–±—â–∏–ª –Ω–∞–º –¶–£–ü, –≤ –©–µ–ª–∫–æ–≤–µ —Ö–æ–ª–æ–¥–Ω–æ, –≤—Å–µ –∑–∞–º–µ—Ä–∑–ª–æ, –∞–Ω—Ç–µ–Ω–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç...
–í—Å–µ —ç—Ç–æ –Ω–∞–≤–æ–¥–∏—Ç –Ω–∞ –≥—Ä—É—Å—Ç–Ω—ã–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –æ –Ω–∞—à–µ–π –±–µ–∑–∞–ª–∞–±–µ—Ä–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑—Ä—É—Ö–µ.

—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –±—ã –≤—ã–≤–µ—Å—Ç–∏:

03.02.1994; 20:18
–°–µ–≥–æ–¥–Ω—è –Ω–∞–±–ª—é–¥–∞–ª–∏ –∏ —Å–Ω—è–ª–∏ –Ω–∞ –≤–∏–¥–µ–æ —Å–ª–µ–¥ –®–∞—Ç—Ç–ª–∞ –ø–æ—Å–ª–µ –≤—ã–≤–µ–¥–µ–Ω–∏—è, –¥—ã–º–∏—Ç –æ–Ω –ø—Ä–∏–ª–∏—á–Ω–æ.
–ì–æ—Ç–æ–≤–∏–º—Å—è –∫ —Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª—å—Å–∫–æ–π —Å–≤—è–∑–∏ —Å —ç–∫–∏–ø–∞–∂–µ–º –®–∞—Ç—Ç–ª–∞ –∏, –∫–æ–Ω–µ—á–Ω–æ, —Å –°–µ—Ä–≥–µ–µ–º.
–ü—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ —Å–µ–∞–Ω—Å—É —Å–≤—è–∑–∏ —Å –®–∞—Ç—Ç–ª–æ–º –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å –†–∏—Ç–æ–π, —Ä–∞–¥–∏–æ–ª—é–±–∏—Ç–µ–ª–µ–º –∏–∑ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏.
–û–Ω–∞ –Ω–µ–º–Ω–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç –ø–æ-—Ä—É—Å—Å–∫–∏ –∏ –æ—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ —Å–ª—ã—à–∞—Ç—å —Ä–æ–¥–Ω—É—é —Ä–µ—á—å.

12.02.1994; 17:17
–°–µ–≥–æ–¥–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–±—Ä–æ—Å–æ–º —á–µ—Ä–µ–∑ —Å–ø—É—Ç–Ω–∏–∫ —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä –≤–∏–¥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Å–Ω—è—Ç–æ–º—É –Ω–∞–º–∏ —Å–ª–µ–¥—É –®–∞—Ç—Ç–ª–∞.
–ö–∞–∫ —Å–æ–æ–±—â–∏–ª –Ω–∞–º –¶–£–ü, –≤ –©–µ–ª–∫–æ–≤–µ —Ö–æ–ª–æ–¥–Ω–æ, –≤—Å–µ –∑–∞–º–µ—Ä–∑–ª–æ, –∞–Ω—Ç–µ–Ω–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç...
–í—Å–µ —ç—Ç–æ –Ω–∞–≤–æ–¥–∏—Ç –Ω–∞ –≥—Ä—É—Å—Ç–Ω—ã–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –æ –Ω–∞—à–µ–π –±–µ–∑–∞–ª–∞–±–µ—Ä–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑—Ä—É—Ö–µ.

13.02.1994; 18:49
–£–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –Ω–∞–±–ª—é–¥–∞–µ–º –Ω–∞ —Ç–µ–Ω–µ–≤–æ–π —á–∞—Å—Ç–∏ –æ—Ä–±–∏—Ç—ã –≤ —Ä–∞–π–æ–Ω–µ –ö–∞–Ω–∞–¥—ã –º–æ—â–Ω–µ–π—à–µ–µ –ø–æ–ª—è—Ä–Ω–æ–µ —Å–∏—è–Ω–∏–µ.
–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, –ø–æ—Ä–∞–∂–∞—é—Ç –º–∞—Å—à—Ç–∞–±—ã –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ. –ü–æ–¥ –Ω–∞–º–∏ –æ–≥—Ä–æ–º–Ω–∞—è –∑–µ–ª–µ–Ω–æ-—Ä–æ–∑–æ–≤–∞—è ¬´–∑–º–µ—è¬ª.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 2. –£–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª(diary.txt) –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ. –û—Ç–≤–µ—Ç –Ω–∞ –∑–∞–¥–∞—á—É(clue.txt) –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 3. –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–∞–π–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ UTF-8.
"""

from datetime import datetime

# –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª diary.txt –¥–ª—è —á—Ç–µ–Ω–∏—è
with open('diary.txt', 'rt', encoding='utf-8') as f:
    # –ß–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –≤ —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ lines
    lines = f.readlines()

# –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ tuples dates_and_texts, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–æ–±–æ–π tuple (date, text),
# –≥–¥–µ date - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ—Ç—á—ë—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ datetime, –∞ text - —Ç–µ–∫—Å—Ç –æ—Ç—á—ë—Ç–∞.
dates_and_texts = []
current_date = None
stored_date = None
current_text = ""
for line in lines:
    # –ü—ã—Ç–∞–µ–º—Å—è –ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –∏–∑ —Å—Ç—Ä–æ–∫–∏
    try:
        current_date = datetime.strptime(line.strip(), "%d.%m.%Y; %H:%M")
        # –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å –ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è, —Ç–æ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ —Å–ø–∏—Å–∫–µ dates_and_texts
        if current_text != "":
            dates_and_texts.append((stored_date, current_text))
            current_text = ""
    # –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è, —Ç–æ —ç—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç—á—ë—Ç–∞
    except ValueError:
        current_text += line
        stored_date = current_date

# –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç—á—ë—Ç –≤ —Å–ø–∏—Å–æ–∫ dates_and_texts
if current_date is not None and current_text != "":
    dates_and_texts.append((current_date, current_text))

# –°–æ—Ä—Ç–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ dates_and_texts –ø–æ –¥–∞—Ç–µ –∏ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è
dates_and_texts = sorted(dates_and_texts, key=lambda x: x[0])

# –í—ã–≤–æ–¥–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω –≤—Å–µ –æ—Ç—á—ë—Ç—ã
for date, text in dates_and_texts:
    print(date.strftime("%d.%m.%Y; %H:%M"))
    print(text.strip() + '\n')